{"ast":null,"code":"var _jsxFileName = \"/Users/henrikpetersson/Desktop/Webbprojekt/makeiteasy/src/Food2Guide.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useOutletContext } from 'react-router-dom';\nimport { LinkIcon, MagnifyingGlassIcon, SparklesIcon, FireIcon, XMarkIcon, WrenchScrewdriverIcon, BookmarkIcon, PlusCircleIcon, ArrowLeftIcon, ExclamationCircleIcon, ChevronUpIcon, ChevronDownIcon, CogIcon, DocumentIcon, ArrowDownTrayIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport logger from './Logger';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://localhost:8000/api/v1';\nconst Spinner = _ref => {\n  let {\n    size = 'h-5 w-5',\n    color = 'text-white'\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    className: `animate-spin ${size} ${color}`,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n      className: \"opacity-25\",\n      cx: \"12\",\n      cy: \"12\",\n      r: \"10\",\n      stroke: \"currentColor\",\n      strokeWidth: \"4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      className: \"opacity-75\",\n      fill: \"currentColor\",\n      d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 3\n  }, this);\n};\n_c = Spinner;\nconst RecipeStreamViewer = _ref2 => {\n  _s();\n  let {\n    status,\n    error,\n    data,\n    onReset,\n    currentUser,\n    videoUrl\n  } = _ref2;\n  const navigate = useNavigate();\n  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);\n  const [showTopImage, setShowTopImage] = useState(true);\n  const [showStepImages, setShowStepImages] = useState(false);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [imageOrientation, setImageOrientation] = useState('landscape');\n  useEffect(() => {\n    if (data.thumbnail_path) {\n      const img = new window.Image();\n      img.src = data.thumbnail_path;\n      img.onload = () => {\n        if (img.height > img.width) {\n          setImageOrientation('portrait');\n        } else {\n          setImageOrientation('landscape');\n        }\n      };\n    }\n  }, [data.thumbnail_path]);\n  const handleDownloadPdf = async recipeData => {\n    try {\n      const formattedInstructions = recipeData.instructions.map((instruction, idx) => {\n        if (typeof instruction === 'string') {\n          return {\n            step: idx + 1,\n            description: instruction\n          };\n        }\n        return {\n          step: instruction.step || idx + 1,\n          description: instruction.description || `Step ${idx + 1}`\n        };\n      });\n      const formattedIngredients = recipeData.ingredients.map(ingredient => {\n        if (typeof ingredient === 'string') {\n          return {\n            name: ingredient,\n            quantity: ''\n          };\n        }\n        return ingredient;\n      });\n      const formattedRequest = {\n        ...recipeData,\n        ingredients: formattedIngredients,\n        instructions: formattedInstructions,\n        template_name: \"professional\",\n        image_orientation: \"landscape\",\n        show_top_image: showTopImage,\n        show_step_images: showStepImages\n      };\n      const response = await fetch(`${API_BASE}/generate-pdf`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formattedRequest),\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        throw new Error(`Error: ${response.status}`);\n      }\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `${formattedRequest.title.replace(/\\s+/g, '_')}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (err) {\n      console.error('Failed to download PDF:', err);\n      alert('Failed to download PDF. Please try again.');\n    }\n  };\n  const handleSaveRecipe = async recipeData => {\n    try {\n      console.log('Original recipeData:', recipeData);\n\n      // Ensure instructions and ingredients are correctly formatted\n      const formattedInstructions = (recipeData.instructions || []).map((inst, idx) => {\n        if (typeof inst === 'string') {\n          return {\n            step: idx + 1,\n            description: inst,\n            image_path: null\n          };\n        }\n        return {\n          ...inst,\n          step: inst.step || idx + 1\n        };\n      });\n      const formattedIngredients = (recipeData.ingredients || []).map(ing => {\n        if (typeof ing === 'string') {\n          return {\n            name: ing,\n            quantity: '',\n            notes: null\n          };\n        }\n        return ing;\n      });\n\n      // Format nutritional_information to be a dictionary if it's a string\n      let formattedNutritionalInfo = null;\n      if (recipeData.nutritional_information) {\n        if (typeof recipeData.nutritional_information === 'string') {\n          // Parse the string into a dictionary format\n          const nutritionText = recipeData.nutritional_information;\n          formattedNutritionalInfo = {\n            summary: nutritionText,\n            calories: null,\n            protein: null,\n            carbohydrates: null,\n            fat: null,\n            fiber: null,\n            sugar: null\n          };\n        } else {\n          formattedNutritionalInfo = recipeData.nutritional_information;\n        }\n      }\n      const formattedRecipeContent = {\n        ...recipeData,\n        instructions: formattedInstructions,\n        ingredients: formattedIngredients,\n        chef_tips: Array.isArray(recipeData.chef_tips) ? recipeData.chef_tips : recipeData.chef_tips ? [recipeData.chef_tips] : [],\n        nutritional_information: formattedNutritionalInfo\n      };\n      const payload = {\n        source_url: videoUrl,\n        recipe_content: formattedRecipeContent\n      };\n      console.log('Sending payload:', JSON.stringify(payload, null, 2));\n      const response = await fetch(`${API_BASE}/recipes/save`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(payload)\n      });\n      console.log('Response status:', response.status);\n      console.log('Response headers:', response.headers);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response body:', errorText);\n        let errorBody;\n        try {\n          errorBody = JSON.parse(errorText);\n        } catch (e) {\n          errorBody = {\n            detail: errorText\n          };\n        }\n        console.error(\"Save recipe error response:\", errorBody);\n        throw new Error(errorBody.detail || 'Failed to save recipe');\n      }\n      const savedRecipe = await response.json();\n      console.log('Recipe saved successfully:', savedRecipe);\n      setShowSuccessModal(true);\n      // Navigate after a short delay to show the success modal\n      setTimeout(() => {\n        navigate('/my-recipes');\n      }, 2000);\n    } catch (error) {\n      console.error('Save recipe error:', error);\n      alert(error.message || 'Failed to save recipe. Please try again.');\n    }\n  };\n  if (Object.keys(data).length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(ExclamationCircleIcon, {\n          className: \"h-12 w-12 mx-auto mb-2 text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold mb-2\",\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onReset,\n          className: \"mt-6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold mb-2\",\n          children: \"Processing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipe-display a4-format\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold\",\n          children: data.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${imageOrientation === 'portrait' ? 'flex-row items-start gap-8' : 'flex-col'} mb-6`,\n        children: [data.thumbnail_path && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${imageOrientation === 'portrait' ? 'w-2/5' : 'w-full'} mb-0`,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: data.thumbnail_path,\n            alt: data.title,\n            className: \"w-full h-auto object-contain rounded-lg shadow-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${imageOrientation === 'portrait' ? 'w-3/5' : 'w-full'}`,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: data.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-3 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Servings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: data.servings\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-3 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Prep Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: data.prep_time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-3 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Cook Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: data.cook_time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row gap-8 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:w-1/3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-semibold mb-4\",\n            children: \"Ingredients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc pl-5 space-y-2\",\n            children: data.ingredients && data.ingredients.map((ing, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-gray-700\",\n              children: [ing.quantity, \" \", ing.name, \" \", ing.notes && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: [\"(\", ing.notes, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 59\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:w-2/3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-semibold mb-4\",\n            children: \"Instructions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"list-decimal pl-5 space-y-4\",\n            children: data.instructions && data.instructions.map((step, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-gray-700\",\n              children: typeof step === 'string' ? step : step.description || `Step ${idx + 1}`\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap justify-center gap-4 mt-8 pt-6 border-t border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDownloadPdf(data),\n          className: \"flex items-center justify-center gap-2 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowDownTrayIcon, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Download PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), currentUser && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSaveRecipe(data),\n          className: \"flex items-center justify-center gap-2 bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(BookmarkIcon, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Save to Recipes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onReset,\n          className: \"flex items-center justify-center gap-2 bg-amber-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-amber-700 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(PlusCircleIcon, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Create New Recipe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), showSuccessModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl transform transition-all\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6\",\n            children: /*#__PURE__*/_jsxDEV(CheckIcon, {\n              className: \"h-8 w-8 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-bold text-gray-900 mb-4\",\n            children: \"Recipe Saved!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-6\",\n            children: \"Your recipe has been successfully saved to your collection. You'll be redirected to your recipes page shortly.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setShowSuccessModal(false);\n                navigate('/my-recipes');\n              },\n              className: \"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors\",\n              children: \"Go to My Recipes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n};\n_s(RecipeStreamViewer, \"0sB1q1OhI8jG2nX0FsMeYCVhJ4M=\", false, function () {\n  return [useNavigate];\n});\n_c2 = RecipeStreamViewer;\nexport default function Food2Guide() {\n  _s2();\n  const {\n    currentUser\n  } = useOutletContext();\n  const [activeTab, setActiveTab] = useState('paste');\n  const [videoUrl, setVideoUrl] = useState('');\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [language, setLanguage] = useState('en');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedVideoId, setSelectedVideoId] = useState(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchPage, setSearchPage] = useState(1);\n  const [hasMoreResults, setHasMoreResults] = useState(true);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [recipeData, setRecipeData] = useState({});\n  const [streamError, setStreamError] = useState(null);\n  const [streamStatus, setStreamStatus] = useState('');\n  const scrollContainerRef = useRef(null);\n\n  // Advanced Settings state\n  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);\n  const [showTopImage, setShowTopImage] = useState(true);\n  const [showStepImages, setShowStepImages] = useState(false);\n  const [dietPreference, setDietPreference] = useState('regular');\n  const [allergies, setAllergies] = useState({\n    gluten: false,\n    nuts: false,\n    eggs: false,\n    dairy: false,\n    shellfish: false\n  });\n  const [instructionLevel, setInstructionLevel] = useState('intermediate');\n  const [showCalories, setShowCalories] = useState(true);\n  const searchYouTube = async () => {\n    if (!searchQuery.trim()) return;\n    setIsSearching(true);\n    setSearchResults([]);\n    setSearchPage(1);\n    setHasMoreResults(true);\n    try {\n      const response = await fetch(`${API_BASE}/search`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: searchQuery,\n          language,\n          source: 'youtube',\n          page: 1\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSearchResults(data.results);\n        if (data.results.length < 10) {\n          setHasMoreResults(false);\n        }\n      } else {\n        setHasMoreResults(false);\n      }\n    } catch (error) {\n      setHasMoreResults(false);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const handleStreamResponse = url => {\n    setIsStreaming(true);\n    setStreamStatus('Initializing stream...');\n    setStreamError('');\n    setRecipeData({});\n    const streamUrl = `${API_BASE}/generate-stream?video_url=${encodeURIComponent(url)}&language=${language}`;\n    const eventSource = new EventSource(streamUrl);\n    eventSource.onmessage = event => {\n      try {\n        const data = JSON.parse(event.data);\n        if (data.status === 'error') {\n          setStreamError(data.message);\n          setIsStreaming(false);\n          eventSource.close();\n        } else if (data.status === 'completed') {\n          if (data.recipe) {\n            setRecipeData(data.recipe);\n          }\n          setIsStreaming(false);\n          eventSource.close();\n        } else if (data.status) {\n          setStreamStatus(data.message || data.status);\n        }\n      } catch (err) {\n        setStreamError('Failed to parse server response.');\n        setIsStreaming(false);\n        eventSource.close();\n      }\n    };\n    eventSource.onerror = err => {\n      setStreamError('Connection to server failed. Please try again.');\n      setIsStreaming(false);\n      eventSource.close();\n    };\n  };\n  const resetAll = () => {\n    setVideoUrl('');\n    setSearchQuery('');\n    setSearchResults([]);\n    setSelectedVideoId(null);\n    setIsStreaming(false);\n    setRecipeData({});\n    setStreamError(null);\n    setStreamStatus('');\n  };\n  const handleGenerateRecipe = () => {\n    if (!videoUrl) return;\n    handleStreamResponse(videoUrl);\n  };\n  const handleVideoSelect = video => {\n    setSelectedVideoId(video.video_id);\n    setVideoUrl(`https://www.youtube.com/watch?v=${video.video_id}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative bg-white shadow-xl rounded-2xl p-10\",\n    children: [/*#__PURE__*/_jsxDEV(SparklesIcon, {\n      className: \"absolute top-0 right-0 h-32 w-32 text-amber-300/30 -translate-y-1/3 translate-x-1/4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), isStreaming || Object.keys(recipeData).length > 0 || streamError ? /*#__PURE__*/_jsxDEV(RecipeStreamViewer, {\n      status: streamStatus,\n      error: streamError,\n      data: recipeData,\n      onReset: resetAll,\n      currentUser: currentUser,\n      videoUrl: videoUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold tracking-tight text-gray-800 text-center\",\n        children: \"Turn cooking videos into step-by-step recipes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 bg-gray-100 p-1 rounded-xl shadow-inner justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveTab('paste'),\n              className: `w-full text-sm rounded-lg px-4 py-2 flex items-center justify-center gap-2 transition-colors ${activeTab === 'paste' ? 'bg-green-600 text-white font-semibold shadow-sm' : 'bg-transparent text-gray-600 hover:bg-white/50'}`,\n              children: [/*#__PURE__*/_jsxDEV(LinkIcon, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Paste Link\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveTab('search'),\n              className: `w-full text-sm rounded-lg px-4 py-2 flex items-center justify-center gap-2 transition-colors ${activeTab === 'search' ? 'bg-green-600 text-white font-semibold shadow-sm' : 'bg-transparent hover:bg-gray-200/50'}`,\n              children: [/*#__PURE__*/_jsxDEV(MagnifyingGlassIcon, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 19\n              }, this), \"Search Recipes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6\",\n            children: [activeTab === 'paste' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"video-url\",\n                type: \"text\",\n                value: videoUrl,\n                onChange: e => {\n                  setVideoUrl(e.target.value);\n                  setSelectedVideoId(null);\n                },\n                placeholder: \"Paste a YouTube or TikTok recipe video\\u2026\",\n                className: \"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 19\n            }, this), activeTab === 'search' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"search-query\",\n                type: \"text\",\n                value: searchQuery,\n                onChange: e => setSearchQuery(e.target.value),\n                onKeyPress: e => e.key === 'Enter' && searchYouTube(),\n                placeholder: \"Search for YouTube video...\",\n                className: \"flex-grow px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: searchYouTube,\n                disabled: isSearching,\n                className: \"bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:bg-gray-400 flex items-center justify-center w-14\",\n                children: isSearching ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 38\n                }, this) : /*#__PURE__*/_jsxDEV(MagnifyingGlassIcon, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 52\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-gray-800 text-sm font-bold tracking-tight\",\n            children: \"Search Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: scrollContainerRef,\n            className: \"max-h-[25rem] overflow-y-auto grid grid-cols-2 gap-4 p-2\",\n            children: searchResults.map(video => /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => handleVideoSelect(video),\n              className: `cursor-pointer border-2 rounded-xl overflow-hidden transition-all duration-200 ${selectedVideoId === video.video_id ? 'border-green-500 shadow-lg scale-105' : 'border-transparent hover:border-green-400/50'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: video.thumbnail_url,\n                alt: video.title,\n                className: \"w-full h-28 object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-semibold text-xs text-gray-800 line-clamp-2\",\n                  children: video.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 550,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-500 mt-1\",\n                  children: video.channel_title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 23\n              }, this)]\n            }, video.video_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-6 border-t border-gray-200 flex flex-col items-center gap-6\",\n          children: [currentUser && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowAdvancedSettings(!showAdvancedSettings),\n              className: \"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(WrenchScrewdriverIcon, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Advanced Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: `h-4 w-4 transition-transform ${showAdvancedSettings ? 'rotate-180' : ''}`,\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M19 9l-7 7-7-7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 19\n            }, this), showAdvancedSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 space-y-4 p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Top image (dish preview under title)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"showTopImage\",\n                      checked: showTopImage,\n                      onChange: () => setShowTopImage(true),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 585,\n                      columnNumber: 29\n                    }, this), \"Yes\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 584,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"showTopImage\",\n                      checked: !showTopImage,\n                      onChange: () => setShowTopImage(false),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 589,\n                      columnNumber: 29\n                    }, this), \"No\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 588,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Step-by-step images\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"showStepImages\",\n                      checked: showStepImages,\n                      onChange: () => setShowStepImages(true),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 599,\n                      columnNumber: 29\n                    }, this), \"Yes\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 598,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"showStepImages\",\n                      checked: !showStepImages,\n                      onChange: () => setShowStepImages(false),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 603,\n                      columnNumber: 29\n                    }, this), \"No\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 602,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Diet preference\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"dietPreference\",\n                      value: \"regular\",\n                      checked: dietPreference === 'regular',\n                      onChange: () => setDietPreference('regular'),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 614,\n                      columnNumber: 29\n                    }, this), \"Regular (default)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"dietPreference\",\n                      value: \"vegetarian\",\n                      checked: dietPreference === 'vegetarian',\n                      onChange: () => setDietPreference('vegetarian'),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 618,\n                      columnNumber: 29\n                    }, this), \"Vegetarian\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 617,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"dietPreference\",\n                      value: \"vegan\",\n                      checked: dietPreference === 'vegan',\n                      onChange: () => setDietPreference('vegan'),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 622,\n                      columnNumber: 29\n                    }, this), \"Vegan\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 621,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Allergies\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 630,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: allergies.gluten,\n                      onChange: () => setAllergies(a => ({\n                        ...a,\n                        gluten: !a.gluten\n                      })),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 633,\n                      columnNumber: 29\n                    }, this), \"Gluten\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 632,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: allergies.nuts,\n                      onChange: () => setAllergies(a => ({\n                        ...a,\n                        nuts: !a.nuts\n                      })),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 637,\n                      columnNumber: 29\n                    }, this), \"Nuts\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 636,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: allergies.eggs,\n                      onChange: () => setAllergies(a => ({\n                        ...a,\n                        eggs: !a.eggs\n                      })),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 641,\n                      columnNumber: 29\n                    }, this), \"Eggs\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 640,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: allergies.dairy,\n                      onChange: () => setAllergies(a => ({\n                        ...a,\n                        dairy: !a.dairy\n                      })),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 645,\n                      columnNumber: 29\n                    }, this), \"Dairy\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: allergies.shellfish,\n                      onChange: () => setAllergies(a => ({\n                        ...a,\n                        shellfish: !a.shellfish\n                      })),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 649,\n                      columnNumber: 29\n                    }, this), \"Shellfish\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Instruction detail level\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"instructionLevel\",\n                      value: \"beginner\",\n                      checked: instructionLevel === 'beginner',\n                      onChange: () => setInstructionLevel('beginner'),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 660,\n                      columnNumber: 29\n                    }, this), \"Beginner\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"instructionLevel\",\n                      value: \"intermediate\",\n                      checked: instructionLevel === 'intermediate',\n                      onChange: () => setInstructionLevel('intermediate'),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 29\n                    }, this), \"Intermediate (default)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 663,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"instructionLevel\",\n                      value: \"expert\",\n                      checked: instructionLevel === 'expert',\n                      onChange: () => setInstructionLevel('expert'),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 668,\n                      columnNumber: 29\n                    }, this), \"Expert\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 667,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Show calories / nutrition info\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"showCalories\",\n                      checked: showCalories,\n                      onChange: () => setShowCalories(true),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 679,\n                      columnNumber: 29\n                    }, this), \"Yes\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 678,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"showCalories\",\n                      checked: !showCalories,\n                      onChange: () => setShowCalories(false),\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 683,\n                      columnNumber: 29\n                    }, this), \"No (default)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 682,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleGenerateRecipe,\n            className: \"flex items-center gap-2 w-full justify-center bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl shadow-md px-6 py-3 transition-transform hover:scale-[1.02]\",\n            children: [/*#__PURE__*/_jsxDEV(SparklesIcon, {\n              className: \"h-6 w-6 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Generate Recipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 5\n  }, this);\n}\n_s2(Food2Guide, \"xy4C7c2KmnwlZtalUwN8+oRWz/E=\", false, function () {\n  return [useOutletContext];\n});\n_c3 = Food2Guide;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Spinner\");\n$RefreshReg$(_c2, \"RecipeStreamViewer\");\n$RefreshReg$(_c3, \"Food2Guide\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useOutletContext","LinkIcon","MagnifyingGlassIcon","SparklesIcon","FireIcon","XMarkIcon","WrenchScrewdriverIcon","BookmarkIcon","PlusCircleIcon","ArrowLeftIcon","ExclamationCircleIcon","ChevronUpIcon","ChevronDownIcon","CogIcon","DocumentIcon","ArrowDownTrayIcon","CheckIcon","logger","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","Spinner","_ref","size","color","className","xmlns","fill","viewBox","children","cx","cy","r","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","d","_c","RecipeStreamViewer","_ref2","_s","status","error","data","onReset","currentUser","videoUrl","navigate","showAdvancedSettings","setShowAdvancedSettings","showTopImage","setShowTopImage","showStepImages","setShowStepImages","showSuccessModal","setShowSuccessModal","imageOrientation","setImageOrientation","thumbnail_path","img","window","Image","src","onload","height","width","handleDownloadPdf","recipeData","formattedInstructions","instructions","map","instruction","idx","step","description","formattedIngredients","ingredients","ingredient","name","quantity","formattedRequest","template_name","image_orientation","show_top_image","show_step_images","response","fetch","method","headers","body","JSON","stringify","credentials","ok","Error","blob","downloadUrl","URL","createObjectURL","link","document","createElement","href","download","title","replace","appendChild","click","remove","err","console","alert","handleSaveRecipe","log","inst","image_path","ing","notes","formattedNutritionalInfo","nutritional_information","nutritionText","summary","calories","protein","carbohydrates","fat","fiber","sugar","formattedRecipeContent","chef_tips","Array","isArray","payload","source_url","recipe_content","errorText","text","errorBody","parse","e","detail","savedRecipe","json","setTimeout","message","Object","keys","length","onClick","alt","servings","prep_time","cook_time","_c2","Food2Guide","_s2","activeTab","setActiveTab","setVideoUrl","searchQuery","setSearchQuery","language","setLanguage","searchResults","setSearchResults","selectedVideoId","setSelectedVideoId","isSearching","setIsSearching","searchPage","setSearchPage","hasMoreResults","setHasMoreResults","isStreaming","setIsStreaming","setRecipeData","streamError","setStreamError","streamStatus","setStreamStatus","scrollContainerRef","dietPreference","setDietPreference","allergies","setAllergies","gluten","nuts","eggs","dairy","shellfish","instructionLevel","setInstructionLevel","showCalories","setShowCalories","searchYouTube","trim","query","source","page","results","handleStreamResponse","url","streamUrl","encodeURIComponent","eventSource","EventSource","onmessage","event","close","recipe","onerror","resetAll","handleGenerateRecipe","handleVideoSelect","video","video_id","id","type","value","onChange","target","placeholder","onKeyPress","key","disabled","ref","thumbnail_url","channel_title","strokeLinecap","strokeLinejoin","checked","a","_c3","$RefreshReg$"],"sources":["/Users/henrikpetersson/Desktop/Webbprojekt/makeiteasy/src/Food2Guide.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useOutletContext } from 'react-router-dom';\nimport { \n  LinkIcon, \n  MagnifyingGlassIcon, \n  SparklesIcon,\n  FireIcon,\n  XMarkIcon,\n  WrenchScrewdriverIcon,\n  BookmarkIcon, \n  PlusCircleIcon,\n  ArrowLeftIcon,\n  ExclamationCircleIcon,\n  ChevronUpIcon,\n  ChevronDownIcon,\n  CogIcon,\n  DocumentIcon,\n  ArrowDownTrayIcon,\n  CheckIcon,\n} from '@heroicons/react/24/outline';\nimport logger from './Logger';\n\nconst API_BASE = 'http://localhost:8000/api/v1';\n\nconst Spinner = ({ size = 'h-5 w-5', color = 'text-white' }) => (\n  <svg className={`animate-spin ${size} ${color}`} xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n  </svg>\n);\n\nconst RecipeStreamViewer = ({ status, error, data, onReset, currentUser, videoUrl }) => {\n  const navigate = useNavigate();\n  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);\n  const [showTopImage, setShowTopImage] = useState(true);\n  const [showStepImages, setShowStepImages] = useState(false);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [imageOrientation, setImageOrientation] = useState('landscape');\n\n  useEffect(() => {\n    if (data.thumbnail_path) {\n      const img = new window.Image();\n      img.src = data.thumbnail_path;\n      img.onload = () => {\n        if (img.height > img.width) {\n          setImageOrientation('portrait');\n        } else {\n          setImageOrientation('landscape');\n        }\n      };\n    }\n  }, [data.thumbnail_path]);\n\n  const handleDownloadPdf = async (recipeData) => {\n    try {\n      const formattedInstructions = recipeData.instructions.map((instruction, idx) => {\n        if (typeof instruction === 'string') {\n          return { step: idx + 1, description: instruction };\n        }\n        return { \n          step: instruction.step || idx + 1, \n          description: instruction.description || `Step ${idx + 1}`\n        };\n      });\n\n      const formattedIngredients = recipeData.ingredients.map(ingredient => {\n        if (typeof ingredient === 'string') {\n          return { name: ingredient, quantity: '' };\n        }\n        return ingredient;\n      });\n\n      const formattedRequest = {\n        ...recipeData,\n        ingredients: formattedIngredients,\n        instructions: formattedInstructions,\n        template_name: \"professional\",\n        image_orientation: \"landscape\",\n        show_top_image: showTopImage,\n        show_step_images: showStepImages\n      };\n\n      const response = await fetch(`${API_BASE}/generate-pdf`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formattedRequest),\n        credentials: 'include'\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Error: ${response.status}`);\n      }\n      \n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `${formattedRequest.title.replace(/\\s+/g, '_')}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (err) {\n      console.error('Failed to download PDF:', err);\n      alert('Failed to download PDF. Please try again.');\n    }\n  };\n  \n  const handleSaveRecipe = async (recipeData) => {\n    try {\n      console.log('Original recipeData:', recipeData);\n      \n      // Ensure instructions and ingredients are correctly formatted\n      const formattedInstructions = (recipeData.instructions || []).map((inst, idx) => {\n        if (typeof inst === 'string') {\n          return { step: idx + 1, description: inst, image_path: null };\n        }\n        return { ...inst, step: inst.step || idx + 1 };\n      });\n\n      const formattedIngredients = (recipeData.ingredients || []).map(ing => {\n        if (typeof ing === 'string') {\n          return { name: ing, quantity: '', notes: null };\n        }\n        return ing;\n      });\n\n                        // Format nutritional_information to be a dictionary if it's a string\n                  let formattedNutritionalInfo = null;\n                  if (recipeData.nutritional_information) {\n                    if (typeof recipeData.nutritional_information === 'string') {\n                      // Parse the string into a dictionary format\n                      const nutritionText = recipeData.nutritional_information;\n                      formattedNutritionalInfo = {\n                        summary: nutritionText,\n                        calories: null,\n                        protein: null,\n                        carbohydrates: null,\n                        fat: null,\n                        fiber: null,\n                        sugar: null\n                      };\n                    } else {\n                      formattedNutritionalInfo = recipeData.nutritional_information;\n                    }\n                  }\n\n                  const formattedRecipeContent = {\n                    ...recipeData,\n                    instructions: formattedInstructions,\n                    ingredients: formattedIngredients,\n                    chef_tips: Array.isArray(recipeData.chef_tips) ? recipeData.chef_tips : recipeData.chef_tips ? [recipeData.chef_tips] : [],\n                    nutritional_information: formattedNutritionalInfo,\n                  };\n\n      const payload = {\n        source_url: videoUrl,\n        recipe_content: formattedRecipeContent\n      };\n\n      console.log('Sending payload:', JSON.stringify(payload, null, 2));\n\n      const response = await fetch(`${API_BASE}/recipes/save`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(payload)\n      });\n\n      console.log('Response status:', response.status);\n      console.log('Response headers:', response.headers);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response body:', errorText);\n        let errorBody;\n        try {\n          errorBody = JSON.parse(errorText);\n        } catch (e) {\n          errorBody = { detail: errorText };\n        }\n        console.error(\"Save recipe error response:\", errorBody);\n        throw new Error(errorBody.detail || 'Failed to save recipe');\n      }\n\n      const savedRecipe = await response.json();\n      console.log('Recipe saved successfully:', savedRecipe);\n      setShowSuccessModal(true);\n      // Navigate after a short delay to show the success modal\n      setTimeout(() => {\n        navigate('/my-recipes');\n      }, 2000); \n    } catch (error) {\n      console.error('Save recipe error:', error);\n      alert(error.message || 'Failed to save recipe. Please try again.');\n    }\n  };\n\n  if (Object.keys(data).length === 0) {\n    return (\n      <div className=\"text-center\">\n        {error ? (\n          <div className=\"text-red-500 mb-4\">\n            <ExclamationCircleIcon className=\"h-12 w-12 mx-auto mb-2 text-red-500\" />\n            <h3 className=\"text-xl font-bold mb-2\">Error</h3>\n            <p>{error}</p>\n            <button\n              onClick={onReset}\n              className=\"mt-6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n            >\n              Try Again\n            </button>\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex justify-center mb-4\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2\">Processing</h3>\n            <p className=\"text-gray-600\">{status}</p>\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  return (\n    <div>\n      <div className=\"recipe-display a4-format\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-3xl font-bold\">{data.title}</h2>\n        </div>\n        \n        <div className={`flex ${imageOrientation === 'portrait' ? 'flex-row items-start gap-8' : 'flex-col'} mb-6`}>\n          {data.thumbnail_path && (\n            <div className={`${imageOrientation === 'portrait' ? 'w-2/5' : 'w-full'} mb-0`}>\n              <img \n                src={data.thumbnail_path} \n                alt={data.title} \n                className=\"w-full h-auto object-contain rounded-lg shadow-md\"\n              />\n            </div>\n          )}\n          <div className={`${imageOrientation === 'portrait' ? 'w-3/5' : 'w-full'}`}>\n            <p className=\"text-gray-600\">{data.description}</p>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-gray-50 p-3 rounded-lg\">\n            <p className=\"text-sm text-gray-500\">Servings</p>\n            <p className=\"font-medium\">{data.servings}</p>\n          </div>\n          <div className=\"bg-gray-50 p-3 rounded-lg\">\n            <p className=\"text-sm text-gray-500\">Prep Time</p>\n            <p className=\"font-medium\">{data.prep_time}</p>\n          </div>\n          <div className=\"bg-gray-50 p-3 rounded-lg\">\n            <p className=\"text-sm text-gray-500\">Cook Time</p>\n            <p className=\"font-medium\">{data.cook_time}</p>\n          </div>\n        </div>\n        \n        <div className=\"flex flex-col md:flex-row gap-8 mb-8\">\n          <div className=\"md:w-1/3\">\n            <h3 className=\"text-2xl font-semibold mb-4\">Ingredients</h3>\n            <ul className=\"list-disc pl-5 space-y-2\">\n              {data.ingredients && data.ingredients.map((ing, idx) => (\n                <li key={idx} className=\"text-gray-700\">\n                  {ing.quantity} {ing.name} {ing.notes && <span className=\"text-gray-500\">({ing.notes})</span>}\n                </li>\n              ))}\n            </ul>\n          </div>\n          \n          <div className=\"md:w-2/3\">\n            <h3 className=\"text-2xl font-semibold mb-4\">Instructions</h3>\n            <ol className=\"list-decimal pl-5 space-y-4\">\n              {data.instructions && data.instructions.map((step, idx) => (\n                <li key={idx} className=\"text-gray-700\">\n                  {typeof step === 'string' ? step : step.description || `Step ${idx + 1}`}\n                </li>\n              ))}\n            </ol>\n          </div>\n        </div>\n        \n        <div className=\"flex flex-wrap justify-center gap-4 mt-8 pt-6 border-t border-gray-200\">\n          <button\n            onClick={() => handleDownloadPdf(data)}\n            className=\"flex items-center justify-center gap-2 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors\"\n          >\n            <ArrowDownTrayIcon className=\"h-5 w-5\" />\n            <span>Download PDF</span>\n          </button>\n          \n          {currentUser && (\n            <button\n              onClick={() => handleSaveRecipe(data)}\n              className=\"flex items-center justify-center gap-2 bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors\"\n            >\n              <BookmarkIcon className=\"h-5 w-5\" />\n              <span>Save to Recipes</span>\n            </button>\n          )}\n          \n          <button\n            onClick={onReset}\n            className=\"flex items-center justify-center gap-2 bg-amber-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-amber-700 transition-colors\"\n          >\n            <PlusCircleIcon className=\"h-5 w-5\" />\n            <span>Create New Recipe</span>\n          </button>\n        </div>\n      </div>\n      \n      {/* Success Modal */}\n      {showSuccessModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl transform transition-all\">\n            <div className=\"text-center\">\n              <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6\">\n                <CheckIcon className=\"h-8 w-8 text-green-600\" />\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">\n                Recipe Saved!\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                Your recipe has been successfully saved to your collection. You'll be redirected to your recipes page shortly.\n              </p>\n              <div className=\"flex justify-center\">\n                <button\n                  onClick={() => {\n                    setShowSuccessModal(false);\n                    navigate('/my-recipes');\n                  }}\n                  className=\"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors\"\n                >\n                  Go to My Recipes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default function Food2Guide() {\n  const { currentUser } = useOutletContext();\n  const [activeTab, setActiveTab] = useState('paste');\n  const [videoUrl, setVideoUrl] = useState('');\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [language, setLanguage] = useState('en');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedVideoId, setSelectedVideoId] = useState(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchPage, setSearchPage] = useState(1);\n  const [hasMoreResults, setHasMoreResults] = useState(true);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [recipeData, setRecipeData] = useState({});\n  const [streamError, setStreamError] = useState(null);\n  const [streamStatus, setStreamStatus] = useState('');\n  const scrollContainerRef = useRef(null);\n\n  // Advanced Settings state\n  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);\n  const [showTopImage, setShowTopImage] = useState(true);\n  const [showStepImages, setShowStepImages] = useState(false);\n  const [dietPreference, setDietPreference] = useState('regular');\n  const [allergies, setAllergies] = useState({ gluten: false, nuts: false, eggs: false, dairy: false, shellfish: false });\n  const [instructionLevel, setInstructionLevel] = useState('intermediate');\n  const [showCalories, setShowCalories] = useState(true);\n\n  const searchYouTube = async () => {\n    if (!searchQuery.trim()) return;\n    \n    setIsSearching(true);\n    setSearchResults([]);\n    setSearchPage(1);\n    setHasMoreResults(true);\n    \n    try {\n      const response = await fetch(`${API_BASE}/search`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ query: searchQuery, language, source: 'youtube', page: 1 })\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setSearchResults(data.results);\n        if (data.results.length < 10) {\n          setHasMoreResults(false);\n        }\n      } else {\n        setHasMoreResults(false);\n      }\n    } catch (error) {\n      setHasMoreResults(false);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  const handleStreamResponse = (url) => {\n    setIsStreaming(true);\n    setStreamStatus('Initializing stream...');\n    setStreamError('');\n    setRecipeData({});\n    \n    const streamUrl = `${API_BASE}/generate-stream?video_url=${encodeURIComponent(url)}&language=${language}`;\n    \n    const eventSource = new EventSource(streamUrl);\n    \n    eventSource.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        if (data.status === 'error') {\n          setStreamError(data.message);\n          setIsStreaming(false);\n          eventSource.close();\n        } else if (data.status === 'completed') {\n          if (data.recipe) {\n            setRecipeData(data.recipe);\n          }\n          setIsStreaming(false); \n          eventSource.close();\n        } else if (data.status) {\n          setStreamStatus(data.message || data.status);\n        }\n      } catch (err) {\n        setStreamError('Failed to parse server response.');\n        setIsStreaming(false);\n        eventSource.close();\n      }\n    };\n    \n    eventSource.onerror = (err) => {\n      setStreamError('Connection to server failed. Please try again.');\n      setIsStreaming(false);\n      eventSource.close();\n    };\n  };\n  \n  const resetAll = () => {\n    setVideoUrl('');\n    setSearchQuery('');\n    setSearchResults([]);\n    setSelectedVideoId(null);\n    setIsStreaming(false);\n    setRecipeData({});\n    setStreamError(null);\n    setStreamStatus('');\n  };\n\n  const handleGenerateRecipe = () => {\n    if (!videoUrl) return;\n    handleStreamResponse(videoUrl);\n  };\n  \n  const handleVideoSelect = (video) => {\n    setSelectedVideoId(video.video_id);\n    setVideoUrl(`https://www.youtube.com/watch?v=${video.video_id}`);\n  };\n\n  return (\n    <div className=\"relative bg-white shadow-xl rounded-2xl p-10\">\n      <SparklesIcon className=\"absolute top-0 right-0 h-32 w-32 text-amber-300/30 -translate-y-1/3 translate-x-1/4\" />\n      \n      {isStreaming || Object.keys(recipeData).length > 0 || streamError ? (\n        <RecipeStreamViewer \n          status={streamStatus}\n          error={streamError}\n          data={recipeData}\n          onReset={resetAll}\n          currentUser={currentUser}\n          videoUrl={videoUrl}\n        />\n      ) : (\n        <>\n          <h1 className=\"text-xl font-bold tracking-tight text-gray-800 text-center\">\n            Turn cooking videos into step-by-step recipes.\n          </h1>\n\n          <div className=\"mt-8 space-y-8\">\n            <div>\n               <div className=\"flex gap-2 bg-gray-100 p-1 rounded-xl shadow-inner justify-center\">\n                <button onClick={() => setActiveTab('paste')} className={`w-full text-sm rounded-lg px-4 py-2 flex items-center justify-center gap-2 transition-colors ${activeTab === 'paste' ? 'bg-green-600 text-white font-semibold shadow-sm' : 'bg-transparent text-gray-600 hover:bg-white/50'}`}>\n                  <LinkIcon className=\"h-5 w-5\"/>\n                  <span>Paste Link</span>\n                </button>\n                <button onClick={() => setActiveTab('search')} className={`w-full text-sm rounded-lg px-4 py-2 flex items-center justify-center gap-2 transition-colors ${activeTab === 'search' ? 'bg-green-600 text-white font-semibold shadow-sm' : 'bg-transparent hover:bg-gray-200/50'}`}>\n                  <MagnifyingGlassIcon className=\"h-5 w-5\" />\n                  Search Recipes\n                </button>\n              </div>\n              <div className=\"mt-6\">\n                {activeTab === 'paste' && (\n                  <div>\n                    <input\n                      id=\"video-url\"\n                      type=\"text\"\n                      value={videoUrl}\n                      onChange={(e) => { setVideoUrl(e.target.value); setSelectedVideoId(null); }}\n                      placeholder=\"Paste a YouTube or TikTok recipe video\"\n                      className=\"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 text-sm\"\n                    />\n                  </div>\n                )}\n                {activeTab === 'search' && (\n                  <div className=\"flex gap-2\">\n                    <input\n                      id=\"search-query\"\n                      type=\"text\"\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      onKeyPress={(e) => e.key === 'Enter' && searchYouTube()}\n                      placeholder=\"Search for YouTube video...\"\n                      className=\"flex-grow px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 text-sm\"\n                    />\n                    <button onClick={searchYouTube} disabled={isSearching} className=\"bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:bg-gray-400 flex items-center justify-center w-14\">\n                      {isSearching ? <Spinner /> : <MagnifyingGlassIcon className=\"h-5 w-5\" />}\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {searchResults.length > 0 && (\n              <div className=\"space-y-4\">\n                <h3 className=\"text-gray-800 text-sm font-bold tracking-tight\">Search Results</h3>\n                <div \n                  ref={scrollContainerRef}\n                  className=\"max-h-[25rem] overflow-y-auto grid grid-cols-2 gap-4 p-2\"\n                >\n                  {searchResults.map((video) => (\n                    <div\n                      key={video.video_id}\n                      onClick={() => handleVideoSelect(video)}\n                      className={`cursor-pointer border-2 rounded-xl overflow-hidden transition-all duration-200 ${selectedVideoId === video.video_id ? 'border-green-500 shadow-lg scale-105' : 'border-transparent hover:border-green-400/50'}`}\n                    >\n                      <img src={video.thumbnail_url} alt={video.title} className=\"w-full h-28 object-cover\" />\n                      <div className=\"p-3\">\n                        <p className=\"font-semibold text-xs text-gray-800 line-clamp-2\">{video.title}</p>\n                        <p className=\"text-xs text-gray-500 mt-1\">{video.channel_title}</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            <div className=\"pt-6 border-t border-gray-200 flex flex-col items-center gap-6\">\n              {currentUser && (\n                <div className=\"w-full\">\n                  <button\n                    onClick={() => setShowAdvancedSettings(!showAdvancedSettings)}\n                    className=\"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\n                  >\n                    <WrenchScrewdriverIcon className=\"h-4 w-4\" />\n                    <span>Advanced Settings</span>\n                    <svg\n                      className={`h-4 w-4 transition-transform ${showAdvancedSettings ? 'rotate-180' : ''}`}\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </button>\n                  \n                  {showAdvancedSettings && (\n                    <div className=\"mt-4 space-y-4 p-4 bg-gray-50 rounded-lg\">\n                      {/* 1. Show images */}\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Top image (dish preview under title)</label>\n                        <div className=\"flex gap-4\">\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"showTopImage\" checked={showTopImage} onChange={() => setShowTopImage(true)} className=\"mr-2\" />\n                            Yes\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"showTopImage\" checked={!showTopImage} onChange={() => setShowTopImage(false)} className=\"mr-2\" />\n                            No\n                          </label>\n                        </div>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Step-by-step images</label>\n                        <div className=\"flex gap-4\">\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"showStepImages\" checked={showStepImages} onChange={() => setShowStepImages(true)} className=\"mr-2\" />\n                            Yes\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"showStepImages\" checked={!showStepImages} onChange={() => setShowStepImages(false)} className=\"mr-2\" />\n                            No\n                          </label>\n                        </div>\n                      </div>\n                      \n                      {/* 2. Diet preference */}\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Diet preference</label>\n                        <div className=\"flex gap-4\">\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"dietPreference\" value=\"regular\" checked={dietPreference === 'regular'} onChange={() => setDietPreference('regular')} className=\"mr-2\" />\n                            Regular (default)\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"dietPreference\" value=\"vegetarian\" checked={dietPreference === 'vegetarian'} onChange={() => setDietPreference('vegetarian')} className=\"mr-2\" />\n                            Vegetarian\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"dietPreference\" value=\"vegan\" checked={dietPreference === 'vegan'} onChange={() => setDietPreference('vegan')} className=\"mr-2\" />\n                            Vegan\n                          </label>\n                        </div>\n                      </div>\n                      \n                      {/* 3. Allergies */}\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Allergies</label>\n                        <div className=\"flex flex-wrap gap-4\">\n                          <label className=\"flex items-center\">\n                            <input type=\"checkbox\" checked={allergies.gluten} onChange={() => setAllergies(a => ({ ...a, gluten: !a.gluten }))} className=\"mr-2\" />\n                            Gluten\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"checkbox\" checked={allergies.nuts} onChange={() => setAllergies(a => ({ ...a, nuts: !a.nuts }))} className=\"mr-2\" />\n                            Nuts\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"checkbox\" checked={allergies.eggs} onChange={() => setAllergies(a => ({ ...a, eggs: !a.eggs }))} className=\"mr-2\" />\n                            Eggs\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"checkbox\" checked={allergies.dairy} onChange={() => setAllergies(a => ({ ...a, dairy: !a.dairy }))} className=\"mr-2\" />\n                            Dairy\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"checkbox\" checked={allergies.shellfish} onChange={() => setAllergies(a => ({ ...a, shellfish: !a.shellfish }))} className=\"mr-2\" />\n                            Shellfish\n                          </label>\n                        </div>\n                      </div>\n                      \n                      {/* 4. Instruction detail level */}\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Instruction detail level</label>\n                        <div className=\"flex gap-4\">\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"instructionLevel\" value=\"beginner\" checked={instructionLevel === 'beginner'} onChange={() => setInstructionLevel('beginner')} className=\"mr-2\" />\n                            Beginner\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"instructionLevel\" value=\"intermediate\" checked={instructionLevel === 'intermediate'} onChange={() => setInstructionLevel('intermediate')} className=\"mr-2\" />\n                            Intermediate (default)\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"instructionLevel\" value=\"expert\" checked={instructionLevel === 'expert'} onChange={() => setInstructionLevel('expert')} className=\"mr-2\" />\n                            Expert\n                          </label>\n                        </div>\n                      </div>\n                      \n                      {/* 5. Show calories / nutrition info */}\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Show calories / nutrition info</label>\n                        <div className=\"flex gap-4\">\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"showCalories\" checked={showCalories} onChange={() => setShowCalories(true)} className=\"mr-2\" />\n                            Yes\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input type=\"radio\" name=\"showCalories\" checked={!showCalories} onChange={() => setShowCalories(false)} className=\"mr-2\" />\n                            No (default)\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n              <button onClick={handleGenerateRecipe} className=\"flex items-center gap-2 w-full justify-center bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl shadow-md px-6 py-3 transition-transform hover:scale-[1.02]\">\n                <SparklesIcon className=\"h-6 w-6 mr-2\" />\n                <span>Generate Recipe</span>\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/henrikpetersson/Desktop/Webbprojekt/makeiteasy/src/Food2Guide.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { LinkIcon, MagnifyingGlassIcon, ArrowDownTrayIcon, SparklesIcon } from '@heroicons/react/24/outline';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000/api/v1';\nconst Spinner = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  className: \"animate-spin h-5 w-5 text-green-600\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"none\",\n  viewBox: \"0 0 24 24\",\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    className: \"opacity-25\",\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\",\n    stroke: \"currentColor\",\n    strokeWidth: \"4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    className: \"opacity-75\",\n    fill: \"currentColor\",\n    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 3\n}, this);\n_c = Spinner;\nconst RecipeStreamViewer = _ref => {\n  let {\n    status,\n    error,\n    data,\n    onReset\n  } = _ref;\n  // This is a \"dumb\" component. It just renders the props it's given.\n  // The parent component is responsible for building the data object over time.\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-2xl shadow-lg animate-fade-in text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-red-600\",\n        children: \"Generation Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 my-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onReset,\n        className: \"bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Start Over\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this);\n  }\n  const handleDownload = () => {\n    alert(\"PDF generation from the streamed recipe is not yet implemented in this view.\");\n  };\n  if (status === 'completed' && data) {\n    var _data$ingredients, _data$instructions;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-2xl shadow-lg animate-fade-in\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-left mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold text-gray-800 mb-4\",\n          children: data.title || \"Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-6\",\n          children: data.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-3 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:col-span-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\",\n              children: \"Ingredients\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside text-gray-700 space-y-2\",\n              children: (_data$ingredients = data.ingredients) === null || _data$ingredients === void 0 ? void 0 : _data$ingredients.map((ing, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: ing.quantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 49,\n                  columnNumber: 23\n                }, this), \" \", ing.name]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:col-span-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\",\n              children: \"Instructions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n              className: \"list-decimal list-inside text-gray-700 space-y-4\",\n              children: (_data$instructions = data.instructions) === null || _data$instructions === void 0 ? void 0 : _data$instructions.map((instr, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: instr\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 justify-center mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownload,\n          className: \"inline-flex items-center gap-2 bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowDownTrayIcon, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), \" Download PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onReset,\n          className: \"bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors\",\n          children: \"Create Another\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this);\n  }\n\n  // Streaming view\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-8 rounded-2xl shadow-lg animate-fade-in\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-center text-gray-800 mb-4\",\n      children: (data === null || data === void 0 ? void 0 : data.title) || \"Generating Recipe...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-500 mb-6\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), data ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6 animate-fade-in\",\n      children: [data.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 text-center mb-6\",\n        children: data.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-3 gap-8\",\n        children: [data.ingredients && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\",\n            children: \"Ingredients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside text-gray-700 space-y-2\",\n            children: data.ingredients.map((ing, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: ing.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 33\n              }, this), \" \", ing.name]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), data.instructions && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\",\n            children: \"Instructions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"list-decimal list-inside text-gray-700 space-y-4\",\n            children: data.instructions.map((instr, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: instr\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 56\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center p-8\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_c2 = RecipeStreamViewer;\nexport default function Food2Guide() {\n  _s();\n  const [videoUrl, setVideoUrl] = useState('');\n  const [language, setLanguage] = useState('en');\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [recipeData, setRecipeData] = useState(null);\n  const [streamError, setStreamError] = useState(null);\n  const [streamStatus, setStreamStatus] = useState('');\n  const [authToken] = useState(localStorage.getItem('authToken'));\n  const languages = [{\n    code: 'en',\n    name: 'English'\n  }, {\n    code: 'sv',\n    name: 'Svenska'\n  }];\n  const processVideo = async () => {\n    if (!videoUrl) {\n      alert('Please provide a video URL.');\n      return;\n    }\n    setIsStreaming(true);\n    setRecipeData(null);\n    setStreamError(null);\n    setStreamStatus('Initializing stream...');\n    try {\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      if (authToken) {\n        headers['Authorization'] = `Bearer ${authToken}`;\n      }\n      const response = await fetch(`${API_BASE_URL}/generate-stream`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          youtube_url: videoUrl,\n          language: language\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Failed to start stream');\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let buffer = \"\";\n      let recipeBuffer = {};\n      const processStream = async () => {\n        while (true) {\n          const {\n            done,\n            value\n          } = await reader.read();\n          if (done) {\n            setStreamStatus('completed');\n            break;\n          }\n          buffer += decoder.decode(value, {\n            stream: true\n          });\n          const lines = buffer.split('\\\\n');\n          buffer = lines.pop();\n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              try {\n                const jsonStr = line.substring(6);\n                const eventData = JSON.parse(jsonStr);\n                if (eventData.status) {\n                  if (eventData.status === 'error') {\n                    setStreamError(eventData.message);\n                    return; // Stop processing\n                  }\n                  setStreamStatus(eventData.message);\n                } else if (eventData.content) {\n                  // This is a recipe chunk, try to parse it\n                  try {\n                    const partialRecipe = JSON.parse(eventData.content);\n                    // Deep merge the partial recipe into the main recipe buffer\n                    recipeBuffer = deepMerge(recipeBuffer, partialRecipe);\n                    setRecipeData({\n                      ...recipeBuffer\n                    });\n                  } catch (e) {\n                    // Incomplete JSON chunk, ignore for now, will be completed by next chunk\n                  }\n                }\n              } catch (e) {\n                // Ignore parsing errors for incomplete JSON\n              }\n            }\n          }\n        }\n      };\n      await processStream();\n    } catch (err) {\n      setStreamError(err.message);\n      setIsStreaming(false);\n    }\n  };\n  const deepMerge = (target, source) => {\n    const output = {\n      ...target\n    };\n    if (isObject(target) && isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (isObject(source[key])) {\n          if (!(key in target)) Object.assign(output, {\n            [key]: source[key]\n          });else output[key] = deepMerge(target[key], source[key]);\n        } else if (Array.isArray(source[key])) {\n          // For arrays, we just replace. A more complex logic could merge arrays.\n          output[key] = source[key];\n        } else {\n          Object.assign(output, {\n            [key]: source[key]\n          });\n        }\n      });\n    }\n    return output;\n  };\n  const isObject = item => {\n    return item && typeof item === 'object' && !Array.isArray(item);\n  };\n  const resetAll = () => {\n    setVideoUrl('');\n    setIsStreaming(false);\n    setRecipeData(null);\n    setStreamError(null);\n    setStreamStatus('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"font-sans bg-gray-50 min-h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-2xl mx-auto py-12 px-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-white shadow-lg rounded-2xl p-8\",\n        children: [/*#__PURE__*/_jsxDEV(SparklesIcon, {\n          className: \"absolute top-0 right-0 h-24 w-24 text-yellow-300/50 -translate-y-1/4 translate-x-1/4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), isStreaming ? /*#__PURE__*/_jsxDEV(RecipeStreamViewer, {\n          status: streamStatus,\n          error: streamError,\n          data: recipeData,\n          onReset: resetAll\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 14\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold tracking-tight text-gray-900 text-center\",\n            children: \"Turn Cooking Videos into Recipes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-4 text-center text-gray-600\",\n            children: \"Paste a link to a YouTube or TikTok cooking video and get a step-by-step recipe in seconds.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-8 space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(LinkIcon, {\n                  className: \"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"video-url\",\n                  type: \"text\",\n                  value: videoUrl,\n                  onChange: e => setVideoUrl(e.target.value),\n                  placeholder: \"Paste a YouTube or TikTok recipe video URL\",\n                  className: \"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"language-select\",\n                value: language,\n                onChange: e => setLanguage(e.target.value),\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white\",\n                children: languages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: lang.code,\n                  children: lang.name\n                }, lang.code, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 44\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: processVideo,\n                className: \"flex items-center gap-2 w-full justify-center bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl shadow-md px-6 py-4 text-lg transition-transform hover:scale-105\",\n                children: [/*#__PURE__*/_jsxDEV(SparklesIcon, {\n                  className: \"h-6 w-6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Generate Recipe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n}\n_s(Food2Guide, \"hb5F5PgtCA1fmnmJV1twSiZ/z8Y=\");\n_c3 = Food2Guide;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Spinner\");\n$RefreshReg$(_c2, \"RecipeStreamViewer\");\n$RefreshReg$(_c3, \"Food2Guide\");","map":{"version":3,"names":["React","useState","useEffect","LinkIcon","MagnifyingGlassIcon","ArrowDownTrayIcon","SparklesIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","Spinner","className","xmlns","fill","viewBox","children","cx","cy","r","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","d","_c","RecipeStreamViewer","_ref","status","error","data","onReset","onClick","handleDownload","alert","_data$ingredients","_data$instructions","title","description","ingredients","map","ing","i","quantity","name","instructions","instr","_c2","Food2Guide","_s","videoUrl","setVideoUrl","language","setLanguage","isStreaming","setIsStreaming","recipeData","setRecipeData","streamError","setStreamError","streamStatus","setStreamStatus","authToken","localStorage","getItem","languages","code","processVideo","headers","response","fetch","method","body","JSON","stringify","youtube_url","ok","errorData","json","Error","detail","reader","getReader","decoder","TextDecoder","buffer","recipeBuffer","processStream","done","value","read","decode","stream","lines","split","pop","line","startsWith","jsonStr","substring","eventData","parse","message","content","partialRecipe","deepMerge","e","err","target","source","output","isObject","Object","keys","forEach","key","assign","Array","isArray","item","resetAll","id","type","onChange","placeholder","lang","_c3","$RefreshReg$"],"sources":["/Users/henrikpetersson/Desktop/Webbprojekt/makeiteasy/src/Food2Guide.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  LinkIcon, \n  MagnifyingGlassIcon, \n  ArrowDownTrayIcon,\n  SparklesIcon,\n} from '@heroicons/react/24/outline';\n\nconst API_BASE_URL = 'http://localhost:8000/api/v1';\n\nconst Spinner = () => (\n  <svg className=\"animate-spin h-5 w-5 text-green-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n  </svg>\n);\n\nconst RecipeStreamViewer = ({ status, error, data, onReset }) => {\n  // This is a \"dumb\" component. It just renders the props it's given.\n  // The parent component is responsible for building the data object over time.\n\n  if (error) {\n    return (\n      <div className=\"bg-white p-8 rounded-2xl shadow-lg animate-fade-in text-center\">\n        <h3 className=\"text-xl font-semibold text-red-600\">Generation Failed</h3>\n        <p className=\"text-gray-600 my-4\">{error}</p>\n        <button onClick={onReset} className=\"bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\">Start Over</button>\n      </div>\n    );\n  }\n\n  const handleDownload = () => {\n    alert(\"PDF generation from the streamed recipe is not yet implemented in this view.\");\n  };\n\n  if (status === 'completed' && data) {\n    return (\n        <div className=\"bg-white p-8 rounded-2xl shadow-lg animate-fade-in\">\n          <div className=\"text-left mb-8\">\n            <h2 className=\"text-3xl font-bold text-gray-800 mb-4\">{data.title || \"Recipe\"}</h2>\n            <p className=\"text-gray-600 mb-6\">{data.description}</p>\n            \n            <div className=\"grid md:grid-cols-3 gap-8\">\n              <div className=\"md:col-span-1\">\n                <h4 className=\"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\">Ingredients</h4>\n                <ul className=\"list-disc list-inside text-gray-700 space-y-2\">\n                  {data.ingredients?.map((ing, i) => (\n                    <li key={i}>\n                      <span className=\"font-semibold\">{ing.quantity}</span> {ing.name}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n              <div className=\"md:col-span-2\">\n                <h4 className=\"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\">Instructions</h4>\n                <ol className=\"list-decimal list-inside text-gray-700 space-y-4\">\n                  {data.instructions?.map((instr, i) => (\n                    <li key={i}>{instr}</li>\n                  ))}\n                </ol>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex gap-4 justify-center mt-8\">\n            <button onClick={handleDownload} className=\"inline-flex items-center gap-2 bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors\">\n              <ArrowDownTrayIcon className=\"h-5 w-5\" /> Download PDF\n            </button>\n            <button onClick={onReset} className=\"bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors\">Create Another</button>\n          </div>\n        </div>\n    );\n  }\n\n  // Streaming view\n  return (\n    <div className=\"bg-white p-8 rounded-2xl shadow-lg animate-fade-in\">\n      <h2 className=\"text-2xl font-bold text-center text-gray-800 mb-4\">{data?.title || \"Generating Recipe...\"}</h2>\n      <p className=\"text-center text-gray-500 mb-6\">{status}</p>\n\n      {data ? (\n        <div className=\"space-y-6 animate-fade-in\">\n          {data.description && <p className=\"text-gray-600 text-center mb-6\">{data.description}</p>}\n          \n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {data.ingredients && (\n              <div className=\"md:col-span-1\">\n                <h4 className=\"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\">Ingredients</h4>\n                <ul className=\"list-disc list-inside text-gray-700 space-y-2\">\n                  {data.ingredients.map((ing, i) => (\n                    <li key={i}><span className=\"font-semibold\">{ing.quantity}</span> {ing.name}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            {data.instructions && (\n              <div className=\"md:col-span-2\">\n                <h4 className=\"text-xl font-bold text-gray-800 mb-4 border-b-2 border-green-400 pb-2\">Instructions</h4>\n                <ol className=\"list-decimal list-inside text-gray-700 space-y-4\">\n                  {data.instructions.map((instr, i) => <li key={i}>{instr}</li>)}\n                </ol>\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n         <div className=\"flex justify-center items-center p-8\">\n            <Spinner />\n         </div>\n      )}\n    </div>\n  );\n};\n\n\nexport default function Food2Guide() {\n  const [videoUrl, setVideoUrl] = useState('');\n  const [language, setLanguage] = useState('en');\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [recipeData, setRecipeData] = useState(null);\n  const [streamError, setStreamError] = useState(null);\n  const [streamStatus, setStreamStatus] = useState('');\n  const [authToken] = useState(localStorage.getItem('authToken'));\n\n  const languages = [\n    { code: 'en', name: 'English' },\n    { code: 'sv', name: 'Svenska' },\n  ];\n\n  const processVideo = async () => {\n    if (!videoUrl) {\n      alert('Please provide a video URL.');\n      return;\n    }\n\n    setIsStreaming(true);\n    setRecipeData(null);\n    setStreamError(null);\n    setStreamStatus('Initializing stream...');\n\n    try {\n      const headers = { 'Content-Type': 'application/json' };\n      if (authToken) {\n        headers['Authorization'] = `Bearer ${authToken}`;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/generate-stream`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          youtube_url: videoUrl,\n          language: language\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Failed to start stream');\n      }\n\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let buffer = \"\";\n      let recipeBuffer = {};\n\n      const processStream = async () => {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) {\n            setStreamStatus('completed');\n            break;\n          }\n\n          buffer += decoder.decode(value, { stream: true });\n          const lines = buffer.split('\\\\n');\n          buffer = lines.pop(); \n\n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              try {\n                const jsonStr = line.substring(6);\n                const eventData = JSON.parse(jsonStr);\n\n                if (eventData.status) {\n                   if (eventData.status === 'error') {\n                    setStreamError(eventData.message);\n                    return; // Stop processing\n                  }\n                  setStreamStatus(eventData.message);\n                } else if (eventData.content) {\n                  // This is a recipe chunk, try to parse it\n                  try {\n                    const partialRecipe = JSON.parse(eventData.content);\n                    // Deep merge the partial recipe into the main recipe buffer\n                    recipeBuffer = deepMerge(recipeBuffer, partialRecipe);\n                    setRecipeData({ ...recipeBuffer });\n                  } catch (e) {\n                     // Incomplete JSON chunk, ignore for now, will be completed by next chunk\n                  }\n                }\n              } catch (e) {\n                // Ignore parsing errors for incomplete JSON\n              }\n            }\n          }\n        }\n      };\n      \n      await processStream();\n\n    } catch (err) {\n      setStreamError(err.message);\n      setIsStreaming(false);\n    }\n  };\n\n  const deepMerge = (target, source) => {\n    const output = { ...target };\n    if (isObject(target) && isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (isObject(source[key])) {\n          if (!(key in target))\n            Object.assign(output, { [key]: source[key] });\n          else\n            output[key] = deepMerge(target[key], source[key]);\n        } else if (Array.isArray(source[key])) {\n          // For arrays, we just replace. A more complex logic could merge arrays.\n          output[key] = source[key];\n        } else {\n          Object.assign(output, { [key]: source[key] });\n        }\n      });\n    }\n    return output;\n  };\n  \n  const isObject = (item) => {\n    return (item && typeof item === 'object' && !Array.isArray(item));\n  };\n\n\n  const resetAll = () => {\n    setVideoUrl('');\n    setIsStreaming(false);\n    setRecipeData(null);\n    setStreamError(null);\n    setStreamStatus('');\n  };\n\n  return (\n    <div className=\"font-sans bg-gray-50 min-h-screen\">\n      <main className=\"max-w-2xl mx-auto py-12 px-6\">\n        <div className=\"relative bg-white shadow-lg rounded-2xl p-8\">\n          <SparklesIcon className=\"absolute top-0 right-0 h-24 w-24 text-yellow-300/50 -translate-y-1/4 translate-x-1/4\" />\n          \n          {isStreaming ? (\n             <RecipeStreamViewer status={streamStatus} error={streamError} data={recipeData} onReset={resetAll} />\n          ) : (\n            <>\n              <h1 className=\"text-3xl font-bold tracking-tight text-gray-900 text-center\">\n                Turn Cooking Videos into Recipes\n              </h1>\n              <p className=\"mt-4 text-center text-gray-600\">\n                Paste a link to a YouTube or TikTok cooking video and get a step-by-step recipe in seconds.\n              </p>\n\n              <div className=\"mt-8 space-y-6\">\n                 <div>\n                    <div className=\"relative\">\n                      <LinkIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                      <input\n                        id=\"video-url\"\n                        type=\"text\"\n                        value={videoUrl}\n                        onChange={(e) => setVideoUrl(e.target.value)}\n                        placeholder=\"Paste a YouTube or TikTok recipe video URL\"\n                        className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\"\n                      />\n                    </div>\n                 </div>\n                <div>\n                  <select\n                    id=\"language-select\"\n                    value={language}\n                    onChange={(e) => setLanguage(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white\"\n                  >\n                    {languages.map(lang => <option key={lang.code} value={lang.code}>{lang.name}</option>)}\n                  </select>\n                </div>\n                \n                <div className=\"pt-2\">\n                  <button onClick={processVideo} className=\"flex items-center gap-2 w-full justify-center bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl shadow-md px-6 py-4 text-lg transition-transform hover:scale-105\">\n                    <SparklesIcon className=\"h-6 w-6\" />\n                    <span>Generate Recipe</span>\n                  </button>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}